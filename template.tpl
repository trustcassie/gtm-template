___INFO___

{
  "type": "TAG",
  "id": "cvt_temp_public_id",
  "version": 1,
  "securityGroups": [],
  "displayName": "Cassie CMP",
  "categories": [
    "TAG_MANAGEMENT"
  ],
  "brand": {
    "id": "github.com_trustcassie",
    "displayName": "Cassie",
    "thumbnail": "data:image/png;base64,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"
  },
  "description": "Cassie is a Consent Management Platform (CMP) that helps make your use of cookies and online tracking compliant with data protection legislations like GDPR and CCPA.",
  "containerContexts": [
    "WEB"
  ]
}


___TEMPLATE_PARAMETERS___

[
  {
    "type": "CHECKBOX",
    "name": "enableConsentModeSettings",
    "checkboxText": "Enable Consent Mode Settings",
    "simpleValueType": true,
    "defaultValue": true
  },
  {
    "type": "GROUP",
    "name": "ConsentModeSettings",
    "displayName": "Consent Mode Settings",
    "groupStyle": "NO_ZIPPY",
    "subParams": [
      {
        "type": "GROUP",
        "name": "DefaultConsentSettings",
        "displayName": "Default Consent Settings",
        "groupStyle": "NO_ZIPPY",
        "subParams": [
          {
            "type": "PARAM_TABLE",
            "name": "regionSettings",
            "displayName": "",
            "paramTableColumns": [
              {
                "param": {
                  "type": "TEXT",
                  "name": "region",
                  "displayName": "Region",
                  "simpleValueType": true,
                  "valueValidators": [
                    {
                      "type": "STRING_LENGTH",
                      "args": [
                        0,
                        5
                      ]
                    }
                  ],
                  "help": "Region - 2 Letters Code (leave blank to apply globally)"
                },
                "isUnique": true
              },
              {
                "param": {
                  "type": "SELECT",
                  "name": "defaultAdStorage",
                  "displayName": "ad_storage",
                  "macrosInSelect": false,
                  "selectItems": [
                    {
                      "value": "granted",
                      "displayValue": "Granted"
                    },
                    {
                      "value": "denied",
                      "displayValue": "Denied"
                    }
                  ],
                  "simpleValueType": true
                },
                "isUnique": false
              },
              {
                "param": {
                  "type": "SELECT",
                  "name": "defaultAnalyticsStorage",
                  "displayName": "analytics_storage",
                  "macrosInSelect": false,
                  "selectItems": [
                    {
                      "value": "granted",
                      "displayValue": "Granted"
                    },
                    {
                      "value": "denied",
                      "displayValue": "Denied"
                    }
                  ],
                  "simpleValueType": true
                },
                "isUnique": false
              },
              {
                "param": {
                  "type": "SELECT",
                  "name": "defaultFunctionalityStorage",
                  "displayName": "functionality_storage",
                  "macrosInSelect": false,
                  "selectItems": [
                    {
                      "value": "granted",
                      "displayValue": "Granted"
                    },
                    {
                      "value": "denied",
                      "displayValue": "Denied"
                    }
                  ],
                  "simpleValueType": true
                },
                "isUnique": false
              },
              {
                "param": {
                  "type": "SELECT",
                  "name": "defaultPersonalizationStorage",
                  "displayName": "personalization_storage",
                  "macrosInSelect": false,
                  "selectItems": [
                    {
                      "value": "granted",
                      "displayValue": "Granted"
                    },
                    {
                      "value": "denied",
                      "displayValue": "Denied"
                    }
                  ],
                  "simpleValueType": true,
                  "defaultValue": "granted"
                },
                "isUnique": false
              },
              {
                "param": {
                  "type": "SELECT",
                  "name": "defaultSecurityStorage",
                  "displayName": "security_storage",
                  "macrosInSelect": false,
                  "selectItems": [
                    {
                      "value": "granted",
                      "displayValue": "Granted"
                    },
                    {
                      "value": "denied",
                      "displayValue": "Denied"
                    }
                  ],
                  "simpleValueType": true,
                  "defaultValue": "granted"
                },
                "isUnique": false
              }
            ]
          }
        ],
        "help": "A default consent state of \u0027granted\u0027 will apply until the user has submitted a consent. You can add different default states for users in different geographical regions. Please use ISO-3166-1 alpha-2 country codes for region values."
      }
    ],
    "enablingConditions": [
      {
        "paramName": "enableConsentModeSettings",
        "paramValue": true,
        "type": "EQUALS"
      }
    ]
  },
  {
    "type": "TEXT",
    "name": "cassieAccessKey",
    "displayName": "Cassie Access Key",
    "simpleValueType": true
  }
]


___SANDBOXED_JS_FOR_WEB_TEMPLATE___

//Register APIS
const log = require('logToConsole');
const setDefaultConsentState = require('setDefaultConsentState');
const updateConsentState = require('updateConsentState');
const isConsentGranted = require('isConsentGranted');
const addConsentListener = require('addConsentListener');
const copyFromWindow = require('copyFromWindow');
const callLater = require('callLater');
const callInWindow = require('callInWindow');
const addEventCallback = require('addEventCallback');
const createQueue = require('createQueue');
const gtagSet = require('gtagSet');
const enableConsentModeSettings = data.enableConsentModeSettings;
const regionSettings = data.regionSettings || [];
const cassieAccessKey = data.cassieAccessKey;
const getCookieValues = require("getCookieValues");
const json = require("JSON");

let cassieGtmConsentCookie = 'SyrenisGtmConsent_' + cassieAccessKey; 

//Utils
const stringToArray = (commaDelimitedString)=>{
return commaDelimitedString ? commaDelimitedString.split(',')
            .map(parts => parts.trim())
            .filter(parts => parts.length !== 0) : [];
};

const getConsentValue  = (consent, consentType) => {
   var returnValue = 'denied';
  consent.forEach(obj => {
    for(var item in obj){
      if(item == consentType){
          returnValue =  (obj[item]);
          break;
      }
  }
});
return returnValue;
};


// Set developer ID TODO
gtagSet('developer_id.dNGJjND', true);
function initDefaultConsent(){
  regionSettings.forEach(regionRow =>{
    let consentObject = {
      ad_storage:regionRow.defaultAdStorage,
      analytics_storage: regionRow.defaultAnalyticsStorage,
      functionality_storage: regionRow.defaultFunctionalityStorage,
      personalization_storage: regionRow.defaultPersonalizationStorage,
      security_storage: regionRow.defaultSecurityStorage,
      region: regionRow.region.length > 0 ? regionRow.region :undefined
    };
  
    log(consentObject);
    setDefaultConsentState(consentObject);
  });
  
}
function updateGtmChannels(){

  //Get Current Consent.
  const consentString = getCookieValues(cassieGtmConsentCookie)[0];
  
  const consent = json.parse(consentString);
  log(consent);
  //If has consent update gtm.
  if(consent == null || consent.length == 0)return;
  //Create Consent Object
  let consentObject = {};

    consentObject.ad_storage = getConsentValue(consent,'ad_storage');

    consentObject.analytics_storage = getConsentValue(consent,'analytics_storage');

    consentObject.functionality_storage = getConsentValue(consent,'functionality_storage');

    consentObject.personalization_storage = getConsentValue(consent,'personalization_storage');

    consentObject.security_storage = getConsentValue(consent,'security_storage');
  
    consentObject.ad_user_data = getConsentValue(consent,'ad_user_data');
  
    consentObject.ad_personalization= getConsentValue(consent,'ad_personalization');

  //Dispatch the update.
  updateConsentState(consentObject);
  
  const dataLayerPush = createQueue('dataLayer');
  dataLayerPush({'event': 'CassieSubmittedConsent'});
  

}

function main(){
  const syrenisGtmConsent = getCookieValues(cassieGtmConsentCookie)[0];
  if(syrenisGtmConsent == null || syrenisGtmConsent.length == 0){
    if(enableConsentModeSettings)
    {
      log('init default consent');
          initDefaultConsent(); 
    }
  }
  else
  {
    log('update gtm channels');
    updateGtmChannels();
  }
}
main();
callInWindow('CassieWidgetLoader.Widget.addConsentListener', updateGtmChannels);
data.gtmOnSuccess();


___WEB_PERMISSIONS___

[
  {
    "instance": {
      "key": {
        "publicId": "logging",
        "versionId": "1"
      },
      "param": [
        {
          "key": "environments",
          "value": {
            "type": 1,
            "string": "all"
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "access_consent",
        "versionId": "1"
      },
      "param": [
        {
          "key": "consentTypes",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "consentType"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "ad_storage"
                  },
                  {
                    "type": 8,
                    "boolean": false
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "consentType"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "analytics_storage"
                  },
                  {
                    "type": 8,
                    "boolean": false
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "consentType"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "functionality_storage"
                  },
                  {
                    "type": 8,
                    "boolean": false
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "consentType"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "personalization_storage"
                  },
                  {
                    "type": 8,
                    "boolean": false
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "consentType"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "security_storage"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "consentType"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "ad_user_data"
                  },
                  {
                    "type": 8,
                    "boolean": false
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "consentType"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "ad_personalization"
                  },
                  {
                    "type": 8,
                    "boolean": false
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "access_globals",
        "versionId": "1"
      },
      "param": [
        {
          "key": "keys",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "CassieWidgetLoader.Widget.getCurrentConsent"
                  },
                  {
                    "type": 8,
                    "boolean": false
                  },
                  {
                    "type": 8,
                    "boolean": false
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "CassieWidgetLoader.Widget.addConsentListener"
                  },
                  {
                    "type": 8,
                    "boolean": false
                  },
                  {
                    "type": 8,
                    "boolean": false
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "CassieWidgetLoader.Widget.getGtmConsent"
                  },
                  {
                    "type": 8,
                    "boolean": false
                  },
                  {
                    "type": 8,
                    "boolean": false
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "dataLayer"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "CassieWidgetLoader.Widget.hasConsent"
                  },
                  {
                    "type": 8,
                    "boolean": false
                  },
                  {
                    "type": 8,
                    "boolean": false
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "CassieWidgetLoader.isLoading"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": false
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "CassieWidgetLoader.getSyrenisGtmConsent"
                  },
                  {
                    "type": 8,
                    "boolean": false
                  },
                  {
                    "type": 8,
                    "boolean": false
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "read_event_metadata",
        "versionId": "1"
      },
      "param": []
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "write_data_layer",
        "versionId": "1"
      },
      "param": [
        {
          "key": "keyPatterns",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 1,
                "string": "developer_id.dNGJjND"
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "get_cookies",
        "versionId": "1"
      },
      "param": [
        {
          "key": "cookieAccess",
          "value": {
            "type": 1,
            "string": "any"
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  }
]


___TESTS___

scenarios: []


___NOTES___

Created on 08/11/2023, 10:30:15


